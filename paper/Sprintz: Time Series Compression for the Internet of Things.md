## Sprintz: Time Series Compression for the Internet of Things

[pdf link](https://arxiv.org/pdf/1808.02515.pdf)

### 作者

DAVIS BLALOCK, Massachusetts Institute of Technology
SAMUEL MADDEN, Massachusetts Institute of Technology
JOHN GUTTAG, Massachusetts Institute of Technology

### 译文

由于联网设备的数量激增, 各类传感器产生的时序数据成为全世界数据中一个巨大且增长迅速的组成部分. 通常, 这些数据采集与分散的, 资源有限的设备并被集中到一个或数个服务器上. 在这种架构中, 一个关键的挑战就是在保证数据质量的前提下减小传输的体积. 低质量的数据会导致其作用减弱, 但更小的体积有助于降低服务器的网络和存储成本, 并降低敏感设备的能耗. 常用的方案是对敏感设备上的数据进行压缩. 但是, 现有的压缩算法要么对内存和延迟有较大影响,  要么对此类时序数据效果不佳.



我们将介绍一种时序数据压缩算法, 它在保持了较高压缩率的同时, 仅需小于 1KB 的内存并几乎没有延迟. 这种方法不仅适用于低功耗的采集设备, 而且适用于服务器的存储和查询环节. 在后一种场景中, 它可以提供单线程 3GB / s 的解压缩吞吐量,  比很多压缩率更低的算法都要快得多. 这种方法的一个重要组件是高速的预测算法--可以在线训练, 且性能远超传统方案如变化值编码.



大量针对不同领域的测试证明, 除了传感器数据, 这个算法同样适用于很多其他类型的时序数据.



#### 1. 简介

由于智能手机, 可穿戴设备, 自动驾驶汽车以及其他联网设备的数量激增, 采集海量传感器时序数据变得常见. 这些数据一旦集中到服务器上, 可以借助各种工具对其进行分析并产生价值. 但是, 采集设备的能耗限制使得数据集中的过程变得极具挑战. 其中, 数据传输对能耗的影响尤其显著: 在一系列具有代表性的芯片上,  基于低功耗蓝牙的数据传输能耗在数十毫瓦, 与此同时, 密集计算的能耗常在数十微瓦, 而空闲状态下的能耗仅接近于1微瓦.



降低能耗的一种策略是在本地处理后仅将数据的概况上传. 这种方式在某些案例中是有效的, 但是需要预先定义好数据概况结构, 以及合适的生成方式. 设计这种生成方式是一种有意义的努力; 比如 Verma et al. 成立了一个研究项目来定义他们研究数据中的特征, 以便精准地对大脑活动进行分类.



另一种常见的形式是在传输数据前进行压缩. 这种方式允许对任意的子序列进行分析, 而又免去了设计概况生成算法的过程. 遗憾的是, 现有压缩方式通常 仅适用于特定的数据类型, 如时间戳, 音频, EEG 等, 或使用了对传感器时序数据不甚友好的算法.



具体来说, 现有算法大多违背了下列设计需求中的一条或多条:

1. **数据块体积小**. 在仅有数 KB 内存的设备上, 不可能在压缩前将大量数据缓存下来. 此外, 即使有更多内存, 数据缓存也会导致不可接受的延迟; 例如,  一块智能手表以 20Hz 的频率向手机传输 9个方向, 每个方向 8-bit大小的 运动数据, 填充一块仅 10KB 大小的缓存需等待 10000/(9 × 1 × 20) = 56 秒. 这对使用数据进行手势识别造成了阻碍,  并且给计步, 动作识别及很多其他功能的用户界面带来了大量的延迟.
2. **解压速率高**. 在中心数据库上提供一个好的解压算法是十分必要的 —— 尽管对大多数采集设备来说解压不是必需的. 这有助于消除服务端数据的编码转化以及简化应用程序. 在数据库中, 时序数据不仅会被密集读取, 还经常会被处理成虚拟化, 聚合, 相关性计算, 或其他操作所需的各种结果(或经过采样的结果). 同时, 写入通常以顺序添加的方式进行. 也就是说, 相比压缩仅需要适配数据产生的速度, 解压速率是一个更重要的指标.
3. **数据完整性**. 鉴于时序数据经常会包含信噪且过采集, 保持压缩数据完成性可能看起来不那么重要.然而, 信噪和过采集通常因应用场景而异, 且可以通过预处理进行定位. 因而, 比起假设某种采样方式或特定的平滑处理适用于所有数据,  不如维持数据原样并让应用开发者去进行进一步的处理.



我们的工作的主要成果, 是`Sprintz` ——  一种提供了优秀的压缩率和速率, 同时满足上述所有需求的时序数据压缩算法. 仅需不到 1KB 的内存,  极小的数据块,  高达单线程 3GB/s 的解压速率. `Sprintz` 的效果利用了 1) 每个变量的值与方差的时态相关性 和 2) 通过使用向量指令实现多变量并行化带来的潜在提升. 最大的限制在于 `Sprintz` 仅能直接处理整数时序. 不过, 根据我们在 5.8 节的讨论, 仅需简单的预处理就可以使之适用于大多数浮点时序.



`Sprintz` 的一个重要组件是一种针对整数的新式矢量化预测算法. 这个算法可以在线训练并以接近 `memcpy` 的速度产生预测结果, 同时相比差值编码, 显著提升压缩率.



我们还取得了一项副成果: 现有的一系列时序压缩算法在大量公开的数据集上的执行结果的, 基于经验的比较结果. 我们还提供了相关代码来重现验证过程, 包括本文中的设计和统计结果. 据我所知, 这是针对时序压缩算法的最大规模的公开基准测试.



本文的内容如下:

- 第 2 节中,  介绍相关的定义, 背景, 及我们解决所遇问题的细节.

- 第 3 节中, 我们概述了相关的工作及 `Sprintz` 的独特之处.

- 第 4 节和第 5 节, 我们详细描述了 `Sprintz` 并给出了其在很多公开的数据集上的执行结果.

  我们还讨论了相比其他方案, `Sprintz` 的优势所在.



#### 2. 定义与背景

